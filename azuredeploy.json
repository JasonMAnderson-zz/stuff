{  
   "parameters":{  
      "siteName":{  
         "type":"string",
         "defaultValue":"jandersbuild1"
      },
      "servicePlanName":{  
         "type":"string",
         "defaultValue":"janders"
      },
      "location":{  
         "type":"string",
         "defaultValue":"West US",
         "allowedValues":[  
            "West US",
            "North Europe"
         ]
      },
      "sku":{  
         "type":"string",
         "defaultValue":"S2",
         "allowedValues":[  
            "B1",
            "B2",
            "B3",
            "S1",
            "S2",
            "S3"
         ]
      },
      "dockerRegistryImageName":{  
         "type":"string",
         "defaultValue":"appsvc/apps:wordpress"
      },
      "serverName":{  
         "type":"string",
	 "defaultValue":"jandersbuild1",
         "metadata":{  
            "description":"WordPress Database Host"
         }
      },
      "databaseName":{  
         "type":"string",
	 "defaultValue":"wordpress",
         "metadata":{  
            "description":"WordPress Database Name"
         }
      },
      "administratorLogin":{  
         "type":"string",
         "defaultValue":"orcas",
         "metadata":{  
            "description":"WordPress Database Username"
         }
      },
      "administratorLoginPassword":{  
         "type":"securestring",
         "metadata":{  
            "description":"WordPress Database Password"
         }
      },
      "wordPressTablePrefix":{  
         "type":"string",
         "defaultValue":"wpx_",
         "metadata":{  
            "description":"WordPress Table Prefix"
         }
      },
      "skuCapacityDTU":{  
         "type":"int",
         "allowedValues":[  
            50,
            100
         ],
         "defaultValue":50
      },
      "skuFamily":{  
         "type":"string",
         "allowedValues":[  
            "SkuFamily"
         ],
         "defaultValue":"SkuFamily"
      },
      "skuName":{  
         "type":"string",
         "allowedValues":[  
            "MYSQLS3M100",
            "MYSQLS2M50"
         ],
         "defaultValue":"MYSQLS2M50"
      },
      "skuSizeMB":{  
         "type":"int",
         "allowedValues":[  
            102400,
            51200
         ],
         "defaultValue":51200
      },
      "skuTier":{  
         "type":"string",
         "allowedValues":[  
            "Basic"
         ],
         "defaultValue":"Basic"
      },
      "version":{  
         "type":"string",
         "allowedValues":[  
            "5.6"
         ],
         "defaultValue":"5.6"
      },
      "firewallRuleName":{  
         "type":"string",
         "minLength":1,
         "maxLength":128,
         "defaultValue":"AllowAll"
      },
      "firewallStartIpAddress":{  
         "type":"string",
         "minLength":1,
         "maxLength":15,
         "defaultValue":"0.0.0.0"
      },
      "firewallEndIpAddress":{  
         "type":"string",
         "minLength":1,
         "maxLength":15,
         "defaultValue":"255.255.255.255"
      },
      "databaseCharacterSet":{  
         "type":"string",
         "defaultValue":"utf8",
         "allowedValues":[  
            "utf8",
            "big5",
            "dec8",
            "cp850",
            "hp8",
            "koi8r",
            "latin1",
            "latin2",
            "swe7",
            "ascii",
            "ujis",
            "sjis",
            "hebrew",
            "tis620",
            "euckr",
            "koi8u",
            "gb2312",
            "greek",
            "cp1250",
            "gbk",
            "latin5",
            "armscii8",
            "ucs2",
            "cp866",
            "keybcs2",
            "macce",
            "macroman",
            "cp852",
            "latin7",
            "utf8mb4",
            "cp1251",
            "utf16",
            "cp1256",
            "cp1257",
            "utf32",
            "binary",
            "geostd8",
            "cp932",
            "eucjpms"
         ]
      },
      "databaseCollation":{  
         "type":"string",
         "defaultValue":"utf8_general_ci",
         "allowedValues":[  
            "utf8_general_ci",
            "big5_chinese_ci",
            "dec8_swedish_ci",
            "cp850_general_ci",
            "hp8_english_ci",
            "koi8r_general_ci",
            "latin1_swedish_ci",
            "latin2_general_ci",
            "swe7_swedish_ci",
            "ascii_general_ci",
            "ujis_japanese_ci",
            "sjis_japanese_ci",
            "hebrew_general_ci",
            "tis620_thai_ci",
            "euckr_korean_ci",
            "koi8u_general_ci",
            "gb2312_chinese_ci",
            "greek_general_ci",
            "cp1250_general_ci",
            "gbk_chinese_ci",
            "latin5_turkish_ci",
            "armscii8_general_ci",
            "ucs2_general_ci",
            "cp866_general_ci",
            "keybcs2_general_ci",
            "macce_general_ci",
            "macroman_general_ci",
            "cp852_general_ci",
            "latin7_general_ci",
            "utf8mb4_general_ci",
            "cp1251_general_ci",
            "utf16_general_ci",
            "cp1256_general_ci",
            "cp1257_general_ci",
            "utf32_general_ci",
            "binary",
            "geostd8_general_ci",
            "cp932_japanese_ci",
            "eucjpms_japanese_ci"
         ]
      }
   },
   "resources":[  
      {  
         "type":"Microsoft.Web/sites",
         "name":"[parameters('siteName')]",
         "properties":{  
            "siteConfig":{  
               "appSettings":[  
                  {  
                     "name":"DOCKER_CUSTOM_IMAGE_NAME",
                     "value":"[parameters('dockerRegistryImageName')]"
                  },
                  {  
                     "name":"WORDPRESS_DB_HOST",
                     "value":"[concat(parameters('serverName'),'.database.windows.net')]"
                  },
                  {  
                     "name":"WORDPRESS_DB_NAME",
                     "value":"[parameters('databaseName')]"
                  },
                  {  
                     "name":"WORDPRESS_DB_USERNAME",
                     "value":"[concat(parameters('administratorLogin'),'@',parameters('serverName'))]"
                  },
                  {  
                     "name":"WORDPRESS_DB_PASSWORD",
                     "value":"[parameters('administratorLoginPassword')]"
                  },
                  {  
                     "name":"WORDPRESS_DB_TABLE_NAME_PREFIX",
                     "value":"[parameters('wordPressTablePrefix')]"
                  }
               ]
            },
            "name":"[parameters('siteName')]",
            "serverFarmId":"[parameters('servicePlanName')]",
            "hostingEnvironment":""
         },
         "apiVersion":"2016-03-01",
         "location":"[parameters('location')]",
         "dependsOn":[  
            "[parameters('servicePlanName')]"
         ],
         "resources":[  
            {  
               "apiVersion":"2015-04-01",
               "name":"connectionstrings",
               "type":"config",
               "dependsOn":[  
                  "[concat('Microsoft.Web/sites/', parameters('siteName'))]"
               ],
               "properties":{  
                  "defaultConnection":{  
                     "value":"[concat('Database=', parameters('databaseName'), ';Data Source=', parameters('serverName'), '.database.windows.net;User Id=', parameters('administratorLogin'),'@', parameters('serverName'),';Password=', parameters('administratorLoginPassword'))]",
                     "type":"MySQL"
                  }
               }
            }
         ]
      },
      {  
         "apiVersion":"2016-09-01",
         "name":"[parameters('servicePlanName')]",
         "type":"Microsoft.Web/serverfarms",
         "location":"[parameters('location')]",
         "properties":{  
            "name":"[parameters('servicePlanName')]",
            "workerSizeId":"1",
            "reserved":true,
            "numberOfWorkers":"1",
            "hostingEnvironment":""
         },
         "sku":{  
            "Name":"[parameters('sku')]"
         },
         "kind":"linux"
      },
      {  
         "apiVersion":"2016-02-01-privatepreview",
         "kind":"",
         "location":"[resourceGroup().location]",
         "name":"[parameters('serverName')]",
         "properties":{  
            "version":"[parameters('version')]",
            "administratorLogin":"[parameters('administratorLogin')]",
            "administratorLoginPassword":"[parameters('administratorLoginPassword')]",
            "storageMB":"[parameters('skuSizeMB')]"
         },
         "sku":{  
            "name":"[parameters('skuName')]",
            "tier":"[parameters('skuTier')]",
            "capacity":"[parameters('skuCapacityDTU')]",
            "size":"[parameters('skuSizeMB')]",
            "family":"[parameters('skuFamily')]"
         },
         "type":"Microsoft.DBforMySQL/servers",
         "resources":[  
            {  
               "type":"firewallrules",
               "apiVersion":"2016-02-01-privatepreview",
               "dependsOn":[  
                  "[concat('Microsoft.DBforMySQL/servers/', parameters('serverName'))]"
               ],
               "location":"[resourceGroup().location]",
               "name":"[parameters('firewallRuleName')]",
               "properties":{  
                  "startIpAddress":"[parameters('firewallStartIpAddress')]",
                  "endIpAddress":"[parameters('firewallEndIpAddress')]"
               }
            },
            {  
               "name":"[parameters('databaseName')]",
               "type":"databases",
               "apiVersion":"2016-02-01-privatepreview",
               "properties":{  
                  "charset":"[parameters('databaseCharacterSet')]",
                  "collation":"[parameters('databaseCollation')]"
               },
               "dependsOn":[  
                  "[concat('Microsoft.DBforMySQL/servers/', parameters('serverName'))]"
               ]
            }
         ]
      }
   ],
   "$schema":"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json#",
   "contentVersion":"1.0.0.0"
}